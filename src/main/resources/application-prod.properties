# Production Profile Properties

# Application
server.port=8080
server.servlet.context-path=/api

# JWT Configuration
# These should be overridden with environment variables in production
app.jwt.secret=${JWT_SECRET:prod-secure-jwt-key-32-characters}
# Use Duration format: 1h for access token, 30d for refresh token
app.jwt.expiration=1h
app.jwt.refresh-expiration=30d
app.jwt.issuer=ThreatScope-Prod

# Database Configuration
spring.datasource.url=jdbc:postgresql://localhost:5432/threatscope_dev
spring.datasource.username=postgres
spring.datasource.password=devpassword
spring.datasource.hikari.maximum-pool-size=10
spring.datasource.hikari.minimum-idle=5
spring.datasource.hikari.idle-timeout=30000

# JPA/Hibernate
spring.jpa.hibernate.ddl-auto=validate
spring.jpa.show-sql=false
spring.jpa.properties.hibernate.format_sql=false
spring.jpa.properties.hibernate.jdbc.batch_size=50
spring.jpa.properties.hibernate.order_inserts=true
spring.jpa.properties.hibernate.order_updates=true

# Flyway
spring.flyway.enabled=true
spring.flyway.baseline-on-migrate=true

# CORS Configuration - Update with your production domains
app.cors.allowed-origins=https://your-production-domain.com
app.cors.allowed-methods=GET,POST,PUT,DELETE,OPTIONS
app.cors.allowed-headers=*
app.cors.max-age=3600

# Rate Limiting
app.rate-limit.enabled=true
app.rate-limit.capacity=500
app.rate-limit.refill-interval=60
app.rate-limit.refill-tokens=50

# Logging
logging.level.root=WARN
logging.level.org.springframework=WARN
logging.level.com.threatscopebackend=INFO
# Elasticsearch Configuration
spring.elasticsearch.uris=${ES_URL:http://localhost:9200}
spring.elasticsearch.connection-timeout=10s
spring.elasticsearch.socket-timeout=60s
spring.elasticsearch.ssl.enabled=${ES_SSL_ENABLED:false}

# Elasticsearch Index Configuration
app.elasticsearch.index.prefix=breaches-
app.elasticsearch.index.current=${app.elasticsearch.index.prefix}${current.month:2025-07}
app.elasticsearch.index.breached-data=breached_data

# Email Configuration
app.email.enabled=${EMAIL_ENABLED:true}
app.email.from=${EMAIL_FROM:noreply@threatscope.com}
app.base-url=${APP_BASE_URL:https://api.threatscope.com}

# SMTP Configuration (override with environment variables in production)
spring.mail.host=${SMTP_HOST:smtp.mailprovider.com}
spring.mail.port=${SMTP_PORT:587}
spring.mail.username=${SMTP_USERNAME:}
spring.mail.password=${SMTP_PASSWORD:}
spring.mail.protocol=smtp
spring.mail.properties.mail.smtp.auth=true
spring.mail.properties.mail.smtp.starttls.enable=true
spring.mail.properties.mail.smtp.connectiontimeout=5000
spring.mail.properties.mail.smtp.timeout=3000
spring.mail.properties.mail.smtp.writetimeout=5000

# Production specific settings
management.endpoints.web.exposure.include=health,info,metrics
management.endpoint.health.show-details=when_authorized
management.server.port=8081

# Security Headers
server.servlet.session.cookie.secure=true
server.servlet.session.cookie.http-only=true
server.servlet.session.cookie.same-site=Lax

# Actuator Security
management.endpoint.health.roles=ACTUATOR
